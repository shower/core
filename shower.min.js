/**
 * Core for Shower HTML presentation engine
 * shower-core v2.0.0, https://github.com/shower/core
 * @copyright 2010–2014 Vadim Makeev, http://pepelsbey.net
 * @license MIT license: github.com/shower/shower/wiki/MIT-License
 */
!function(a){var b,c={NOT_RESOLVED:"NOT_RESOLVED",IN_RESOLVING:"IN_RESOLVING",RESOLVED:"RESOLVED"},d=function(){var l={trackCircularDependencies:!0,allowMultipleDeclarations:!0},m={},n=!1,o=[],p=function(a,d,e){e||(e=d,d=[]);var f=m[a];f||(f=m[a]={name:a,decl:b}),f.decl={name:a,prev:f.decl,fn:e,state:c.NOT_RESOLVED,deps:d,dependents:[],exports:b}},q=function(b,c,d){"string"==typeof b&&(b=[b]),n||(n=!0,k(u)),o.push({deps:b,cb:function(b,f){f?(d||e)(f):c.apply(a,b)}})},r=function(a){var b=m[a];return b?c[b.decl.state]:"NOT_DEFINED"},s=function(a){return!!m[a]},t=function(a){for(var b in a)a.hasOwnProperty(b)&&(l[b]=a[b])},u=function(){n=!1,v()},v=function(){var a,b=o,c=0;for(o=[];a=b[c++];)w(null,a.deps,[],a.cb)},w=function(a,b,d,e){var h=b.length;h||e([]);for(var i,k,n=[],o=0,p=h;p>o;){if(i=b[o++],"string"==typeof i){if(!m[i])return void e(null,f(i,a));k=m[i].decl}else k=i;if(k.state===c.IN_RESOLVING&&l.trackCircularDependencies&&j(k,d))return void e(null,g(k,d));n.push(k),x(k,d,function(a,b){if(b)return void e(null,b);if(!--h){for(var c,d=[],f=0;c=n[f++];)d.push(c.exports);e(d)}})}},x=function(b,d,e){if(b.state===c.RESOLVED)return void e(b.exports);if(b.dependents.push(e),b.state!==c.IN_RESOLVING){if(b.prev&&!l.allowMultipleDeclarations)return void z(b,i(b));l.trackCircularDependencies&&(d=d.slice()).push(b);var f=!1,g=b.prev?b.deps.concat([b.prev]):b.deps;b.state=c.IN_RESOLVING,w(b,g,d,function(c,d){return d?void z(b,d):(c.unshift(function(a,c){return f?void e(null,h(b)):(f=!0,void(c?z(b,c):y(b,a)))}),void b.fn.apply({name:b.name,deps:b.deps,global:a},c))})}},y=function(a,d){a.exports=d,a.state=c.RESOLVED;for(var e,f=0;e=a.dependents[f++];)e(d);a.dependents=b},z=function(a,b){a.state=c.NOT_RESOLVED;for(var d,e=0;d=a.dependents[e++];)d(null,b);a.dependents=[]};return{create:d,define:p,require:q,getState:r,isDefined:s,setOptions:t}},e=function(a){k(function(){throw a})},f=function(a,b){return Error(b?'Module "'+b.name+'": can\'t resolve dependence "'+a+'"':'Required module "'+a+"\" can't be resolved")},g=function(a,b){for(var c,d=[],e=0;c=b[e++];)d.push(c.name);return d.push(a.name),Error('Circular dependence has been detected: "'+d.join(" -> ")+'"')},h=function(a){return Error('Declaration of module "'+a.name+'" has already been provided')},i=function(a){return Error('Multiple declarations of module "'+a.name+'" have been detected')},j=function(a,b){for(var c,d=0;c=b[d++];)if(a===c)return!0;return!1},k=function(){var b=[],c=function(a){return 1===b.push(a)},d=function(){var a=b,c=0,d=b.length;for(b=[];d>c;)a[c++]()};if("object"==typeof process&&process.nextTick)return function(a){c(a)&&process.nextTick(d)};if(a.setImmediate)return function(b){c(b)&&a.setImmediate(d)};if(a.postMessage&&!a.opera){var e=!0;if(a.attachEvent){var f=function(){e=!1};a.attachEvent("onmessage",f),a.postMessage("__checkAsync","*"),a.detachEvent("onmessage",f)}if(e){var g="__modules"+ +new Date,h=function(a){a.data===g&&(a.stopPropagation&&a.stopPropagation(),d())};return a.addEventListener?a.addEventListener("message",h,!0):a.attachEvent("onmessage",h),function(b){c(b)&&a.postMessage(g,"*")}}}var i=a.document;if("onreadystatechange"in i.createElement("script")){var j=i.getElementsByTagName("head")[0],k=function(){var a=i.createElement("script");a.onreadystatechange=function(){a.parentNode.removeChild(a),a=a.onreadystatechange=null,d()},j.appendChild(a)};return function(a){c(a)&&k()}}return function(a){c(a)&&setTimeout(d,0)}}(),l=d();l.nextTick=k,"object"==typeof exports?module.exports=l:a.modules=l}(this),modules.define("plugin.Timer",["util.extend"],function(a,b){function c(a){this._shower=a,this._timer=null,this._showerListeners=null,this._playerListeners=null,this.init()}b(c.prototype,{init:function(){this._setupListeners(),-1!=this._shower.player.getCurrentSlideIndex()&&this._onSlideActivate()},destroy:function(){this._clearTimer(),this._clearListeners(),this._shower=null},_setupListeners:function(){this._showerListeners=this._shower.events.group().on("destroy",this.destroy,this),this._playerListeners=this._shower.player.events.group().on("activate",this._onSlideActivate,this).on("plugintimernext",this._onTimerNext,this)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll()},_onSlideActivate:function(){if(this._clearTimer(),this._shower.container.isSlideMode()){var a=this._shower.player.getCurrentSlide(),b=a.getLayout().getData("timing");b&&/^(\d{1,2}:)?\d{1,3}$/.test(b)&&(-1!==b.indexOf(":")?(b=b.split(":"),b=1e3*(60*parseInt(b[0],10)+parseInt(b[1],10))):b=1e3*parseInt(b,10),0!==b&&this._initTimer(b))}},_onTimerNext:function(){this._shower.next(),this._clearTimer()},_initTimer:function(a){this._timer=setInterval(function(){this._shower.player.events.emit("plugintimernext")}.bind(this),a)},_clearTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null)}}),a(c)}),modules.define("plugin.Navigation",["util.extend"],function(a,b){function c(a,b){b=b||{},this._shower=a,this._elementsSelector=b.selector||".next",this._elements=[],this._innerComplete=0,this.init()}b(c.prototype,{init:function(){this._setupListeners(),-1!=this._shower.player.getCurrentSlideIndex()&&this._onSlideActivate()},destroy:function(){this._clearListeners(),this._elements=null,this._elementsSelector=null,this._innerComplete=null,this._shower=null},next:function(){if(!this._elements)throw new Error("Inner nav elements not found.");this._innerComplete++;for(var a=0,b=this._elements.length;b>a;a++){var c=this._elements[a];a<this._innerComplete?c.classList.add("active"):c.classList.remove("active")}return this},getInnerLength:function(){return this._elements.length},getInnerComplete:function(){return this._innerComplete},_setupListeners:function(){this._showerListeners=this._shower.events.group().on("destroy",this.destroy,this),this._playerListeners=this._shower.player.events.group().on("activate",this._onSlideActivate,this).on("next",this._onNext,this).on("plugintimernext",this._onPluginTimerNext,this)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll()},_onNext:function(a){var b=this._elements.length;b&&this._innerComplete<b&&(a.preventDefault(),this.next())},_onPluginTimerNext:function(a){this._elements.length&&(a.preventDefault(),this._shower.next())},_onSlideActivate:function(){var a=this._shower.player.getCurrentSlide().getLayout(),b=a.getElement();this._elements=b.querySelectorAll(this._elementsSelector),this._elements=Array.prototype.slice.call(this._elements),this._innerComplete=this._getInnerComplete()},_getInnerComplete:function(){return this._elements.filter(function(a){return a.classList.contains("active")}).length}}),a(c)}),modules.define("plugin.Progress",["util.extend"],function(a,b){function c(a,b){b=b||{},this._shower=a,this._playerListeners=null,this._element=null,this._elementSelector=b.selector||".shower__progress",this.init()}b(c.prototype,{init:function(){var a=this._shower.container.getElement();this._element=a.querySelector(this._elementSelector),this._element&&this._setupListeners(),this.updateProgress()},destroy:function(){this._clearListeners(),this._shower=null},updateProgress:function(){var a=this._shower.getSlidesCount(),b=this._shower.player.getCurrentSlideIndex();this._element.style.width=100/(a-1)*b.toFixed(2)+"%"},_setupListeners:function(){var a=this._shower;this._showerListeners=a.events.group().on("destroy",this.destroy,this),this._playerListeners=a.player.events.group().on("activate",this._onSlideChange,this)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll()},_onSlideChange:function(){this.updateProgress()}}),a(c)}),modules.define("plugin.Touch",["util.extend"],function(a,b){function c(a,b){b=b||{},this._shower=a,this._gestures=b.gestures,this.init()}b(c.prototype,{init:function(){this._setupListeners()},destroy:function(){this._clearListeners(),this._shower=null},_setupListeners:function(){var a=this._shower;this._showerListeners=a.events.group().on("destroy",this.destroy,this),document.addEventListener("touchstart",this._onTouchStart.bind(this),!1),document.addEventListener("touchmove",this._onTouchMove.bind(this),!1)},_clearListeners:function(){this._showerListeners.offAll(),document.removeEventListener("touchstart",this._onTouchStart.bind(this),!1),document.removeEventListener("touchmove",this._onTouchMove.bind(this),!1)},_onTouchStart:function(a){var b,c=this._shower,d=c.container.isSlideMode(),e=a.target,f=this._getSlideByElement(e);f&&(d&&!this._isInteractiveElement(e)&&(b=a.touches[0].pageX,b>window.innerWidth/2?c.next():c.prev()),d||f.activate())},_onTouchMove:function(a){this._shower.container.isSlideMode()&&a.preventDefault()},_getSlideByElement:function(a){for(var b=this._shower.getSlidesArray(),c=null,d=0,e=b.length;e>d;d++)if(a.id==b[d].getId()){c=this._shower.get(d);break}return c},_isInteractiveElement:function(a){return"A"==a.nodeType}}),a(c)}),modules.define("plugin.Notes",["util.extend"],function(a,b){function c(a,b){b=b||{},this._shower=a,this._notesSelector=b.selector||"footer",this.init()}b(c.prototype,{init:function(){this._setupListeners()},destroy:function(){this.clear(),this._clearListeners(),this._shower=null},show:function(){this.clear();var a=this._shower,b=a.player.getCurrentSlide(),c=b.getLayout(),d=c.getElement().querySelector(this._notesSelector);d&&d.innerHTML&&console.info(d.innerHTML.replace(/\n\s+/g,"\n"));var e=a.player.getCurrentSlideIndex(),f=a.get(e+1);f&&console.info("NEXT: "+f.getTitle())},clear:function(){this._shower.container.isSlideMode()&&!this._shower.options.debugMode&&console.clear()},_setupListeners:function(){var a=this._shower;this._showerListeners=a.events.group().on("destroy",this.destroy,this),this._playerListeners=a.player.events.group().on("activate",this._onSlideActivate,this)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll()},_onSlideActivate:function(){this.show()}}),a(c)}),function(){function a(){modules.require(["shower"],function(a){a.init(d,f)})}function b(a){return a.split(",").map(function(a){return a.trim()})}var c,d=".shower",e=["plugins","debug","slides","hotkeys"],f={};document.addEventListener("DOMContentLoaded",function(){var g=document.querySelector(d),h=function(a){return g.dataset?g.dataset[a]:g.getAttribute("data-"+a)};if(!g)throw new Error("Shower element not found.");"false"!=h("auto")&&(window.hasOwnProperty("showerOptions")?f=window.showerOptions:(e.forEach(function(a){var b=h(a);null!==b&&"undefined"!=typeof b&&(f[a]=b)}),c=f.plugins,(c||""==c)&&(f.plugins=b(c))),a())},!1)}(),modules.define("event.Emitter",["event.Event","event.EventGroup","util.extend"],function(a,b,c,d){function e(a){this._parameters=a||{},this._parent=null,this._listeners={}}d(e.prototype,{on:function(a,b,c){if("string"==typeof a)this._addListener(a,b,c);else for(var d=0,e=a.length;e>d;d++)this._addListener(a[d],b,c);return this},off:function(a,b,c){if("string"==typeof a)this._removeListener(a,b,c);else for(var d=0,e=a.length;e>d;d++)this._removeListener(a[d],b,c);return this},once:function(a,b,c){var d=function(e){this.off(a,d,this),c?b.call(c,e):b(e)};return this.on(a,d,this),this},emit:function(a,b){var c=b;c&&"function"==typeof c.get||(c=this.createEventObject(a,b,this._parameters.context)),c.isPropagationStopped()||(this._listeners.hasOwnProperty(a)&&this._callListeners(this._listeners[a],c),this._parent&&!c.isPropagationStopped()&&this._parent.emit(a,c))},createEventObject:function(a,c,e){var f={target:e,type:a};return new b(c?d(f,c):f)},setParent:function(a){this._parent!=a&&(this._parent=a)},getParent:function(){return this._parent},group:function(){return new c(this)},_addListener:function(a,b,c){var d={callback:b,context:c};this._listeners[a]?this._listeners[a].push(d):this._listeners[a]=[d]},_removeListener:function(a,b,c){var d=this._listeners[a];if(d){for(var e=-1,f=0,g=d.lenght;g>f;f++)d[f].callback==b&&d[f].context==c&&(e=f);-1!=e&&(1==d.length?this._clearType(a):d.slice(e,1))}},_clearType:function(a){this._listeners.hasOwnProperty(a)&&delete this._listeners[a]},_callListeners:function(a,b){for(var c=a.length-1;c>=0&&!b.defaultPrevented();){var d=a[c];d&&(d.context?d.callback.call(d.context,b):d.callback(b)),c--}}}),a(e)}),modules.define("event.Event",["util.extend"],function(a,b){function c(a){this._data=a,this._preventDefault=!1,this._stopPropagation=!1}b(c.prototype,{get:function(a){return this._data[a]},preventDefault:function(){return this._preventDefault=!0},defaultPrevented:function(){return this._preventDefault},stopPropagation:function(){return this._stopPropagation=!0},isPropagationStopped:function(){return this._stopPropagation}}),a(c)}),modules.define("event.EventGroup",["util.extend"],function(a,b){function c(a){this.events=a,this._listeners=[]}b(c.prototype,{on:function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;e>d;d++)this._listeners.push(a[d],b,c);else this._listeners.push(a,b,c);return this.events.on(a,b,c),this},off:function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;e>d;d++)this._removeListener(a[d],b,c);else this._removeListener(a,b,c);return this},offAll:function(){for(var a=0,b=this._listeners.length;b>a;a+=3)this.events.off(this._listeners[a],this._listeners[a+1],this._listeners[a+2]);return this._listeners.length=0,this},_removeListener:function(a,b,c){for(var d=this._listeners.indexOf(a,0);-1!=d;)this._listeners[d+1]==b&&this._listeners[d+2]==c&&(this._listeners.splice(d,3),this.events.off(a,b,c)),d=this._listeners.indexOf(a,d)}}),a(c)}),modules.define("shower",["event.Emitter","shower.Container","shower.parser","shower.Player","shower.Location","util.extend"],function(a,b,c,d,e,f,g){function h(){this.events=new b,this.options={},this.container=null,this.player=null,this.location=null,this._slides=[],this._isReady=!1,this._isHotkeysOn=!0}g(h.prototype,{init:function(a,b){return a=a||".shower",this.options=g({debug:!1,hotkeys:!0,slide:".shower > section",parser:d,plugins:["progress","timer","navigation","notes","touch"]},b),"string"==typeof a&&(a=document.querySelector(a)),this.container=new c(this,a),this.player=new e(this),this.location=new f(this),this._parseSlides(),this._initPlugins(),this.options.debug&&(document.body.classList.add("debug"),console.log("Debug mode on")),this.options.hotkeys||this.disableHotkeys(),this._isReady=!0,this.events.emit("ready"),this},destroy:function(){this.events.emit("destroy"),this.container.destroy(),this.player.destroy(),this._slides.length=0},ready:function(a){return this._isReady?a():this.events.once("ready",a),this},add:function(a){if(Array.isArray(a))for(var b=0,c=a.length;c>b;b++)this._addSlide(a[b]);else this._addSlide(a);return this},remove:function(a){var b;if("number"==typeof a)b=a;else{if(-1==this._slides.indexOf(a))throw new Error("Slide not found");b=this._slides.indexOf(a)}return a=this._slides.splice(b,1),this.events.emit("slideremove",{slide:a}),a.destroy(),this},get:function(a){return this._slides[a]},getSlidesArray:function(){return this._slides.slice()},getSlidesCount:function(){return this._slides.length},next:function(){return this.player.next(),this},prev:function(){return this.player.prev(),this},first:function(){return this.player.first(),this},last:function(){return this.player.last(),this},go:function(a){return this.player.go(a),this},disableHotkeys:function(){return this._isHotkeysOn=!1,this},enableHotkeys:function(){return this._isHotkeysOn=!0,this},isHotkeysEnabled:function(){return this._isHotkeysOn},_parseSlides:function(){var a=this.options.parser(this.container.getElement(),this.options.slide);this.add(a)},_addSlide:function(a){this._slides.push(a),this.events.emit("slideadd",{slide:a})},_initPlugins:function(){var a=this;this.options.plugins.forEach(function(b){"string"==typeof b&&(b=[b,{}]);var c=b[0],d="plugin."+c.charAt(0).toUpperCase()+c.substr(1),e=b[1];modules.require([d],function(b){new b(a,e)})},this)}}),a(new h)}),modules.define("shower.Container",["event.Emitter","util.bind","util.extend"],function(a,b,c,d){function e(a,c){this.events=new b,this._shower=a,this._element=c,this._isSlideMode=!1,this.init()}var f={full:"shower--full",list:"shower--list"};d(e.prototype,{init:function(){this._setupListeners()},getElement:function(){return this._element},enterSlideMode:function(){var a=document.body.classList;a.remove(f.list),a.add(f.full),this._applyTransform(this._getTransformScale()),this._isSlideMode=!0,this.events.emit("slidemodeenter")},exitSlideMode:function(){var a=document.body.classList;a.remove(f.full),a.add(f.list),this._applyTransform("none"),this.scrollToSlide(this._shower.player.getCurrentSlideIndex()),this._isSlideMode=!1,this.events.emit("slidemodeexit")},isSlideMode:function(){return this._isSlideMode},scrollToSlide:function(a){var b,c=this._shower.get(a);if(!c)throw new Error("There is no slide with index "+a);return b=c.getLayout().getElement(),window.scrollTo(0,b.offsetTop),this},_setupListeners:function(){this._showerListeners=this._shower.events.group().on("slideadd",this._onSlideAdd,this).on("slideremove",this._onSlideRemove,this),window.addEventListener("resize",c(this._onResize,this)),document.addEventListener("keydown",c(this._onKeyDown,this))},_clearListeners:function(){this._showerListeners.offAll(),window.removeEventListener("resize",c(this._onResize,this)),document.removeEventListener("keydown",c(this._onKeyDown,this))},_getTransformScale:function(){var a=Math.max(document.body.clientWidth/window.innerWidth,document.body.clientHeight/window.innerHeight);return"scale("+1/a+")"},_applyTransform:function(a){["WebkitTransform","MozTransform","msTransform","OTransform","transform"].forEach(function(b){document.body.style[b]=a})},_onResize:function(){this.isSlideMode()&&this._applyTransform(this._getTransformScale())},_onSlideAdd:function(a){var b=a.get("slide");b.events.on("click",this.enterSlideMode,this)},_onSlideRemove:function(a){var b=a.get("slide");b.events.off("click",this.enterSlideMode,this)},_onKeyDown:function(a){if(this._shower.isHotkeysEnabled())switch(a.which){case 13:a.preventDefault(),this.enterSlideMode();break;case 27:a.preventDefault(),this.exitSlideMode();break;case 116:if(a.preventDefault(),this.isSlideMode())this.exitSlideMode();else{var b=a.shiftKey?this._shower.player.getCurrentSlideIndex():0;this._shower.go(b),this.enterSlideMode()}break;case 80:!this.isSlideMode()&&a.altKey&&a.metaKey&&(a.preventDefault(),this.enterSlideMode())}}}),a(e)}),modules.define("shower.Location",["util.bind","util.extend"],function(a,b,c){function d(a){this._shower=a,this._url=window.location,this._showerListeners=null,this._playerListeners=null,this._containerListeners=null;var b=!(!window.history||!window.history.pushState);b&&this.init()}c(d.prototype,{init:function(){this._setupListeners(),this._shower.ready(b(this._initLocationData,this))},destroy:function(){this._clearListeners()},_initLocationData:function(){var a=this._url.hash.substr(1);if(""!=a)for(var b=this._shower.getSlidesArray(),c=b.length-1;c>=0;c--)if(b[c].getId()==a){this._url.hash="",this._shower.player.go(c);break}/^full.*/.test(this._url.search.substr(1))&&this._shower.container.enterSlideMode()},_setupListeners:function(){var a=this._shower;this._showerListeners=a.events.group().on("destroy",this.destroy,this),this._playerListeners=a.player.events.group().on("activate",this._onSlideActivate,this),this._containerListeners=a.container.events.group().on("slidemodeenter",this._onSlideModeEnter,this).on("slidemodeexit",this._onSlideModeExit,this)},_clearListeners:function(){this._showerListeners.offAll(),this._playerListeners.offAll(),this._containerListeners.offAll()},_getSlideHash:function(a){var b=this._shower.get(a);return"#"+b.getId()},_onSlideActivate:function(a){this._url.hash=this._getSlideHash(a.get("index"))},_onSlideModeEnter:function(){var a=this._shower.player.getCurrentSlideIndex();this._addHistory("?full"+this._getSlideHash(a))},_onSlideModeExit:function(){var a=this._shower.player.getCurrentSlideIndex();this._addHistory(this._getSlideHash(a))},_addHistory:function(a){window.history.pushState(null,null,this._url.pathname+a)}}),a(d)}),modules.define("shower.Player",["event.Emitter","util.bind","util.extend"],function(a,b,c,d){function e(a){this.events=new b,this._shower=a,this._currentSlideNumber=-1,this._currentSlide=null,this._documentTitle=null,this.init()}d(e.prototype,{init:function(){var a=this._shower;this._showerListeners=a.events.group().on("slideadd",this._onSlideAdd,this).on("slideremove",this._onSlideRemove,this),this._showerContainerListeners=a.container.events.group().on("slidemodeenter",this._onSlideModeEnter,this).on("slidemodeenter",this._onSlideModeExit,this),this._playerListeners=this.events.group().on("prev",this._onPrev,this).on("next",this._onNext,this),document.addEventListener("keydown",c(this._onKeyDown,this))},destroy:function(){this._showerListeners.offAll(),this._showerContainerListeners.offAll(),this._playerListeners.offAll(),document.addEventListener("keydown",c(this._onKeyDown,this)),this._currentSlide=null,this._currentSlideNumber=null,this._documentTitle=null,this._shower=null},next:function(){return this.events.emit("next"),this},prev:function(){return this.events.emit("prev"),this},first:function(){return this.go(0),this},last:function(){return this.go(this._shower.getSlidesCount()-1),this},go:function(a){var b=this._shower.getSlidesCount(),c=this._currentSlide;return a!=this._currentSlideNumber&&b>a&&a>=0&&(c&&c.isActive()&&c.deactivate(),c=this._shower.get(a),this._currentSlide=c,this._currentSlideNumber=a,c.isActive()||c.activate(),this.events.emit("activate",{index:a})),this},getCurrentSlide:function(){return this._currentSlide},getCurrentSlideIndex:function(){return this._currentSlideNumber},_onPrev:function(){this._changeSlide(this._currentSlideNumber-1)},_onNext:function(){this._changeSlide(this._currentSlideNumber+1)},_changeSlide:function(a){this.go(a)},_onSlideModeEnter:function(){var a=this._currentSlide.getTitle();a&&(this._documentTitle=document.title,document.title=a+" — "+this._documentTitle)},_onSlideModeExit:function(){this._documentTitle&&(document.title=this._documentTitle,this._documentTitle=null)},_onSlideAdd:function(a){var b=a.get("slide");b.events.on("activate",this._onSlideActivate,this)},_onSlideRemove:function(a){var b=a.get("slide");b.events.off("activate",this._onSlideActivate,this)},_onSlideActivate:function(a){var b=a.get("slide"),c=this._shower.getSlidesArray().indexOf(b);this.go(c)},_onKeyDown:function(a){if(this._shower.isHotkeysEnabled())switch(a.which){case 33:case 38:case 37:case 72:case 75:if(a.altKey||a.ctrlKey||a.metaKey)return;a.preventDefault(),this.prev();break;case 34:case 40:case 39:case 76:case 74:if(a.altKey||a.ctrlKey||a.metaKey)return;a.preventDefault(),this.next();break;case 36:a.preventDefault(),this.first();break;case 35:a.preventDefault(),this.last();break;case 9:case 32:if(a.altKey||a.ctrlKey||a.metaKey)return;a.preventDefault(),a.shiftKey?this.prev():this.next()}}}),a(e)}),modules.define("shower.parser",["Slide"],function(a,b){function c(a,c){var d=[],e=a.querySelectorAll(c);e=Array.prototype.slice.call(e);for(var f=0,g=e.length;g>f;f++){var h=e[f],i=new b(h);h.id||(h.id=f+1),d.push(i)}return d}a(c)}),modules.define("Slide",["event.Emitter","slide.Layout","slide.layoutFactory","util.extend"],function(a,b,c,d,e){function f(a,c){this.events=new b,this.options=e({},c),this._content=a,this._isActive=!1,this.init()}e(f.prototype,{init:function(){this._layout="string"==typeof this._content?new d.createLayout(this._content):new c(this._content),this._layout.setParent(this),this._setupListeners()},destroy:function(){this._clearListeners(),this._isActive=null,this.options=null,this._layout.destroy()},activate:function(){return this._isActive=!0,this.events.emit("activate",{slide:this}),this},deactivate:function(){return this._isActive=!1,this.events.emit("deactivate",{slide:this}),this},isActive:function(){return this._isActive},getLayout:function(){return this._layout},getTitle:function(){return this._layout.getTitle()},getId:function(){return this._layout.getElement().id},setTitle:function(a){return this._layout.setTitle(a),this},_setupListeners:function(){this._layoutListeners=this._layout.events.group().on("click",this._onSlideClick,this)},_clearListeners:function(){this._layoutListeners.offAll()},_onSlideClick:function(){this.activate(),this.events.emit("click",{slide:this})}}),a(f)}),modules.define("slide.Layout",["event.Emitter","util.bind","util.extend"],function(a,b,c,d){function e(a){this.events=new b,this._element=a,this._parent=null,this._parentElement=null,this.init()}var f={active:"active",visited:"visited"};d(e.prototype,{init:function(){var a=this._element.parentNode;a?this._parentElement=a:this.setParentElement(a)},setParent:function(a){this._parent!=a&&(this._clearListeners(),this._parent=a,this._setupListeners(),this.events.emit("parentchange",{parent:a}))},getParent:function(){return this._parent},setParentElement:function(a){a!=this._parentElement&&(this._parentElement=a,a.appendChild(this._element),this.events.emit("parentelementchange",{parentElement:a}))},getParentElement:function(){return this._parentElement},getElement:function(){return this._element},setTitle:function(a){var b=this._element.querySelector("h2");b?b.innerHTML=a:(b=document.createElement("h2"),b.innerHTML=a,this._element.insertBefore(b,this._element.firstChild))},getTitle:function(){var a=this._element.querySelector("h2");return a?a.textContent:null},getData:function(a){var b=this._element;return b.dataset?b.dataset[a]:b.getAttribute("data-"+a)},_setupListeners:function(){this._slideListeners=this._parent.events.group().on("activate",this._onSlideActivate,this).on("deactivate",this._onSlideDeactivate,this),this._element.addEventListener("click",c(this._onSlideClick,this),!1)},_clearListeners:function(){this._slideListeners&&this._slideListeners.offAll(),this._element.removeEventListener("click",c(this._onSlideClick,this))},_onSlideActivate:function(){this._element.classList.add(f.active)},_onSlideDeactivate:function(){var a=this._element.classList;a.remove(f.active),a.add(f.visited)},_onSlideClick:function(){this.events.emit("click")}}),a(e)}),modules.define("slide.layoutFactory",["slide.Layout","util.extend"],function(a,b,c){function d(){}c(d.prototype,{createLayout:function(a){a=a||{};var d=this._createElement(c({content:"",contentType:"slide"},a));return new b(d)},_createElement:function(a){var b=document.createElement("section");return b.innerHTML=a.content,b.classList.add(a.contentType),b}}),a(d)}),modules.define("util.bind",[],function(a){var b="function"==typeof Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}};a(b)}),modules.define("util.extend",function(a){function b(a){if(!a)throw new Error("util.extend: Target not found");for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}return a}a(b)}),modules.define("util.inherit",["util.extend"],function(a,b){var c=function(a,c,d){return a.prototype=Object.create(c.prototype),a.prototype.constructor=a,a.super=c.prototype,a.super.constructor=c,d&&b(a.prototype,d),a.prototype};a(c)});